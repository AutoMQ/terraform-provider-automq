## Usage

### No need to manually create VPC
This will create all the resources needed to build the automq-byoc service through terraform, including VPC, bucket, role, EC2, etc.

```terraform
module "automq_byoc" {
  source = "terraform-automq-modules/automq-byoc-console"

  automq_byoc_env_id                       = "example"
  cloud_provider_region                    = "ap-southeast-1"
  create_new_vpc                           = true
}
```

### Provide an existing VPC that meets the conditions
> For VPC requirements, please refer to: [VPC Create](https://docs.automq.com/zh/automq-cloud/getting-started/create-byoc-environment/aws/step-1-installing-env-with-ami#%E6%AD%A5%E9%AA%A4-2%E5%88%9D%E5%A7%8B%E5%8C%96-vpc-%E7%BD%91%E7%BB%9C)

```terraform
module "automq_byoc" {
  source = "terraform-automq-modules/automq-byoc-console"

  automq_byoc_env_id                       = "example"
  cloud_provider_region                    = "ap-southeast-1"
  create_new_vpc                           = false
  automq_byoc_vpc_id                       = "vpc-022xxxx54103b"
  automq_byoc_env_console_public_subnet_id = "subnet-09500xxxxxb6fd28"
  
}
```

<!-- BEGIN_TF_DOCS -->
## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | 5.62.0 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_automq_byoc"></a> [automq\_byoc](#module\_automq\_byoc) | ./modules/aws-console-module | 1.0.0   |
| <a name="module_automq_byoc_data_bucket_name"></a> [automq\_byoc\_data\_bucket\_name](#module\_automq\_byoc\_data\_bucket\_name) | terraform-aws-modules/s3-bucket/aws | 4.1.2   |
| <a name="module_automq_byoc_ops_bucket_name"></a> [automq\_byoc\_ops\_bucket\_name](#module\_automq\_byoc\_ops\_bucket\_name) | terraform-aws-modules/s3-bucket/aws | 4.1.2   |
| <a name="module_automq_byoc_vpc"></a> [automq\_byoc\_vpc](#module\_automq\_byoc\_vpc) | terraform-aws-modules/vpc/aws | 5.0.0   |

## Resources

| Name | Type |
|------|------|
| [aws_eip.nat](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eip) | resource |
| [aws_security_group.endpoint_sg](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
| [aws_vpc_endpoint.ec2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc_endpoint) | resource |
| [aws_vpc_endpoint.s3](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc_endpoint) | resource |
| [aws_availability_zones.available](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/availability_zones) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_automq_byoc_data_bucket_name"></a> [automq\_byoc\_data\_bucket\_name](#input\_automq\_byoc\_data\_bucket\_name) | Set the existed object storage bucket for that used to store message data generated by applications. The message data Bucket must be separate from the Ops Bucket. | `string` | n/a |    no    |
| <a name="input_automq_byoc_ec2_instance_type"></a> [automq\_byoc\_ec2\_instance\_type](#input\_automq\_byoc\_ec2\_instance\_type) | Can be specified, But you need to ensure that 2 cores are 8g or above | `string` | `"m5d.large"` |    no    |
| <a name="input_automq_byoc_env_console_ami"></a> [automq\_byoc\_env\_console\_ami](#input\_automq\_byoc\_env\_console\_ami) | When obtaining ami id from non-cloud market, manually specify ami id. | `string` | n/a |    no    |
| <a name="input_automq_byoc_env_console_public_subnet_id"></a> [automq\_byoc\_env\_console\_public\_subnet\_id](#input\_automq\_byoc\_env\_console\_public\_subnet\_id) | Select a subnet for deploying the AutoMQ BYOC environment console. Ensure that the chosen subnet supports public access. | `string` | n/a |    no    |
| <a name="input_automq_byoc_env_id"></a> [automq\_byoc\_env\_id](#input\_automq\_byoc\_env\_id) | This parameter is used to create resources within the environment. Additionally, all cloud resource names will incorporate this parameter as part of their names.This parameter supports only numbers, uppercase and lowercase English letters, and hyphens. It must start with a letter and is limited to a length of 32 characters. | `string` | n/a |   yes    |
| <a name="input_automq_byoc_env_version"></a> [automq\_byoc\_env\_version](#input\_automq\_byoc\_env\_version) | Set the version for the AutoMQ BYOC environment console. It is recommended to keep the default value, which is the latest version. | `string` | n/a |    no    |
| <a name="input_automq_byoc_ops_bucket_name"></a> [automq\_byoc\_ops\_bucket\_name](#input\_automq\_byoc\_ops\_bucket\_name) | Set the existed object storage bucket for that used to store AutoMQ system logs and metrics data for system monitoring and alerts. This Bucket does not contain any application business data. The Ops Bucket must be separate from the message data Bucket. | `string` | n/a |    no    |
| <a name="input_automq_byoc_vpc_id"></a> [automq\_byoc\_vpc\_id](#input\_automq\_byoc\_vpc\_id) | The ID of the VPC | `string` | n/a |    no    |
| <a name="input_cloud_provider_region"></a> [cloud\_provider\_region](#input\_cloud\_provider\_region) | Set the cloud provider's region. AutoMQ will deploy to this region. | `string` | n/a |   yes    |
| <a name="input_create_automq_byoc_data_bucket"></a> [create\_automq\_byoc\_data\_bucket](#input\_create\_automq\_byoc\_data\_bucket) | This parameter controls whether to create a new bucket. If it is a POC scenario or there is no available bucket, set it to true. If there is already a suitable bucket, set it to false. | `bool` | `true` |    no    |
| <a name="input_create_automq_byoc_ops_bucket"></a> [create\_automq\_byoc\_ops\_bucket](#input\_create\_automq\_byoc\_ops\_bucket) | This parameter controls whether to create a new bucket. If it is a POC scenario or there is no available bucket, set it to true. If there is already a suitable bucket, set it to false. | `bool` | `true` |    no    |
| <a name="input_create_new_vpc"></a> [create\_new\_vpc](#input\_create\_new\_vpc) | This setting determines whether to create a new VPC. If set to true, a new VPC spanning three availability zones will be automatically created, which is recommended only for POC scenarios. For production scenario using AutoMQ, you should provide the VPC where the current Kafka application resides and check the current VPC against the requirements specified in the documentation. | `bool` | `true` |    no    |
| <a name="input_specific_data_bucket_name"></a> [specific\_data\_bucket\_name](#input\_specific\_data\_bucket\_name) | Set up a new object storage bucket that will be used to store message data generated by applications. The message data Bucket must be separate from the Ops Bucket. | `string` | `"automq-data"` |    no    |
| <a name="input_specific_ops_bucket_name"></a> [specific\_ops\_bucket\_name](#input\_specific\_ops\_bucket\_name) | Set up a new object storage bucket that will be used to store AutoMQ system logs and metrics data for system monitoring and alerts. This Bucket does not contain any application business data. The Ops Bucket must be separate from the message data Bucket. | `string` | `"automq-ops"` |    no    |
| <a name="input_specified_ami_by_marketplace"></a> [specified\_ami\_by\_marketplace](#input\_specified\_ami\_by\_marketplace) | Specifies the switch to obtain ami id from the cloud market. If true, it means to obtain the specified version of ami id through the cloud market. Otherwise, it needs to be specified manually. | `bool` | `true` |    no    |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_automq_byoc_data_bucket_arn"></a> [automq\_byoc\_data\_bucket\_arn](#output\_automq\_byoc\_data\_bucket\_arn) | Data storage bucket arn. |
| <a name="output_automq_byoc_data_bucket_name"></a> [automq\_byoc\_data\_bucket\_name](#output\_automq\_byoc\_data\_bucket\_name) | The object storage bucket for that used to store message data generated by applications. The message data Bucket must be separate from the Ops Bucket. |
| <a name="output_automq_byoc_env_console_ami"></a> [automq\_byoc\_env\_console\_ami](#output\_automq\_byoc\_env\_console\_ami) | Mirror ami id of AutoMQ BYOC Console. |
| <a name="output_automq_byoc_env_console_ec2_instance_ip"></a> [automq\_byoc\_env\_console\_ec2\_instance\_ip](#output\_automq\_byoc\_env\_console\_ec2\_instance\_ip) | The instance IP of the deployed AutoMQ BYOC control panel. You can access the service through this IP. |
| <a name="output_automq_byoc_env_console_public_subnet_id"></a> [automq\_byoc\_env\_console\_public\_subnet\_id](#output\_automq\_byoc\_env\_console\_public\_subnet\_id) | AutoMQ WebUI is deployed under this subnet. |
| <a name="output_automq_byoc_env_id"></a> [automq\_byoc\_env\_id](#output\_automq\_byoc\_env\_id) | This parameter is used to create resources within the environment. Additionally, all cloud resource names will incorporate this parameter as part of their names.This parameter supports only numbers, uppercase and lowercase English letters, and hyphens. It must start with a letter and is limited to a length of 32 characters. |
| <a name="output_automq_byoc_env_webui_address"></a> [automq\_byoc\_env\_webui\_address](#output\_automq\_byoc\_env\_webui\_address) | Address accessed by AutoMQ BYOC service |
| <a name="output_automq_byoc_instance_id"></a> [automq\_byoc\_instance\_id](#output\_automq\_byoc\_instance\_id) | AutoMQ BYOC Console instance ID. |
| <a name="output_automq_byoc_instance_profile_arn"></a> [automq\_byoc\_instance\_profile\_arn](#output\_automq\_byoc\_instance\_profile\_arn) | Instance configuration file ARN |
| <a name="output_automq_byoc_ops_bucket_arn"></a> [automq\_byoc\_ops\_bucket\_arn](#output\_automq\_byoc\_ops\_bucket\_arn) | Ops storage bucket arn. |
| <a name="output_automq_byoc_ops_bucket_name"></a> [automq\_byoc\_ops\_bucket\_name](#output\_automq\_byoc\_ops\_bucket\_name) | The object storage bucket for that used to store AutoMQ system logs and metrics data for system monitoring and alerts. This Bucket does not contain any application business data. The Ops Bucket must be separate from the message data Bucket. |
| <a name="output_automq_byoc_policy_arn"></a> [automq\_byoc\_policy\_arn](#output\_automq\_byoc\_policy\_arn) | AutoMQ BYOC is bound to a custom policy on the role arn. |
| <a name="output_automq_byoc_role_arn"></a> [automq\_byoc\_role\_arn](#output\_automq\_byoc\_role\_arn) | AutoMQ BYOC is bound to the role arn of the Console. |
| <a name="output_automq_byoc_security_group_name"></a> [automq\_byoc\_security\_group\_name](#output\_automq\_byoc\_security\_group\_name) | Security group bound to the AutoMQ BYOC service. |
| <a name="output_automq_byoc_vpc_id"></a> [automq\_byoc\_vpc\_id](#output\_automq\_byoc\_vpc\_id) | AutoMQ BYOC is deployed in this VPC. |
| <a name="output_automq_byoc_vpc_route53_zone_id"></a> [automq\_byoc\_vpc\_route53\_zone\_id](#output\_automq\_byoc\_vpc\_route53\_zone\_id) | Route53 bound to the VPC. |
<!-- END_TF_DOCS -->